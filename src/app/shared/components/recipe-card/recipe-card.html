<mat-card class="recipe-card" (click)="onCardClick()">
  <div class="recipe-image">
    <img *ngIf="recipe.image?.thumbnail" [src]="recipe.image?.thumbnail" [alt]="recipe.name">
    <div *ngIf="!recipe.image?.thumbnail" class="recipe-image-placeholder">
      <mat-icon>restaurant</mat-icon>
    </div>
  </div>

  <mat-card-header>
    <mat-card-title>{{ recipe.name }}</mat-card-title>
    <mat-card-subtitle>by {{ recipe.createdBy.name }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="recipe-info">
      <div class="info-row">
        <mat-icon>schedule</mat-icon>
        <span>Prep: {{ recipe.prepTime }}m | Cook: {{ recipe.cookTime }}m</span>
      </div>

      <div class="info-row">
        <mat-icon>fingerprint</mat-icon>
        <span class="info-value recipe-id">{{ recipe.id }}</span>
      </div>

      <div class="tags" *ngIf="recipe.tags.length > 0">
        <mat-chip *ngFor="let tag of recipe.tags">{{ tag }}</mat-chip>
      </div>
    </div>
  </mat-card-content>

  <mat-card-actions align="end">
    <button *ngIf="isLoggedIn && !canEdit" 
            mat-stroked-button 
            [color]="isSaved ? 'accent' : 'primary'" 
            (click)="onSaveClick($event)" 
            matTooltip="Save Recipe" 
            class="save-button">
      <mat-icon>{{ isSaved ? 'bookmark' : 'bookmark_border' }}</mat-icon>
      Save
    </button>
    <ng-container *ngIf="canEdit">
      <button mat-stroked-button color="primary" (click)="onEditClick($event)">
        <mat-icon>edit</mat-icon>
        Edit
      </button>
      <button mat-stroked-button color="warn" (click)="onDeleteClick($event)">
        <mat-icon>delete</mat-icon>
        Delete
      </button>
    </ng-container>
  </mat-card-actions>
</mat-card>
